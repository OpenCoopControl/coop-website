---
title: API Endpoints
description: Комплетан преглед свих OpenCoopControl API крајњих тачака.
---

**# OpenCoopControl API крајње тачке**
Овај документ пружа комплетан преглед свих API крајњих тачака доступних у OpenCoopControl систему. Ове крајње тачке Вам омогућавају да програмски контролишете и надгледате Ваш кокошињац, интегришући га са другим паметним фармерским системима или прилагођеним апликацијама.

**## Основни URL**
Сви API захтеви треба да буду послати на IP адресу Вашег ESP32 контролера. Ако користите mDNS, такође можете користити `http://opencoopcontrol.local`.
Пример: `http://192.168.1.100/api/`

**## Аутентификација**
Тренутно, OpenCoopControl нуди једноставан API без потребе за аутентификацијом за приступ локалној мрежи. Будуће верзије могу укључивати API кључеве за побољшану сигурност.

**## Формат одговора**
Сви одговори се враћају у JSON формату.

**## Доступне крајње тачке**

**### Добијање тренутног стања**
Преузима све тренутне очитане податке сензора и информације о статусу.

- **URL**: `/api/state`
- **Метод**: `GET`
- **Пример одговора**:

```json
{
  "temperature": 24.5,
  "lightLevel": 65,
  "waterLevel": 80,
  "doorOpen": true,
  "feederActive": false,
  "lastFeedTime": "14:30:22",
  "doorLastChanged": "06:15:03",
  "deviceId": "OCC1A2B3C4D",
  "coopName": "Backyard Coop"
}
```

**### Добијање тренутних подешавања**
Преузима сва тренутна подешавања аутоматизације.

- **URL**: `/api/settings`
- **Метод**: `GET`
- **Пример одговора**:

```json
{
  "doorAutoMode": true,
  "doorOpenHour": 6,
  "doorCloseHour": 21,
  "lightThreshold": 30,
  "feederAutoMode": true,
  "feedHour1": 6,
  "feedHour2": 19,
  "feedAmount": 7
}
```

**### Ажурирање подешавања**
Ажурира подешавања аутоматизације.

- **URL**: `/api/settings`
- **Метод**: `POST`
- **Content-Type**: `application/json`
- **Пример захтева**:

```json
{
  "doorAutoMode": true,
  "doorOpenHour": 7,
  "doorCloseHour": 20,
  "lightThreshold": 25,
  "feederAutoMode": true,
  "feedHour1": 7,
  "feedHour2": 18,
  "feedAmount": 5
}
```

- **Одговор**: `"Settings updated"` у случају успеха, у супротном порука о грешци

**### Контрола врата**
Отворите или затворите врата кокошињца.

**#### Отварање врата**

- **URL**: `/api/door/open`
- **Метод**: `POST`
- **Одговор**: `"Door opened"` у случају успеха

**#### Затварање врата**

- **URL**: `/api/door/close`
- **Метод**: `POST`
- **Одговор**: `"Door closed"` у случају успеха

**### Контрола хранилице**
Активирајте аутоматску хранилицу.

- **URL**: `/api/feeder/activate`
- **Метод**: `POST`
- **Параметри упита** (опционо):
  - `duration` - Трајање храњења у секундама (прекрива подразумевано подешавање)
- **Примери**:
  - Активирање са подразумеваним трајањем: `/api/feeder/activate`
  - Активирање на 10 секунди: `/api/feeder/activate?duration=10`
- **Одговор**: `"Feeder activated"` у случају успеха

**### Информације о верзији**
Преузмите информације о верзији фирмвера.

- **URL**: `/api/version`
- **Метод**: `GET`
- **Пример одговора**:

```json
{
  "version": "0.1.10",
  "name": "OpenCoopControl",
  "buildTimestamp": "2025-04-09 14:30:00",
  "author": "OpenCoopControl Team"
}
```

**## Руковање грешкама**
У случају грешке, API ће вратити одговарајући HTTP статусни код заједно са поруком о грешци у обичном тексту.
Уобичајени статуси грешака:

- `400 Bad Request` - Неважећи параметри или JSON
- `404 Not Found` - Крајња тачка не постоји
- `500 Internal Server Error` - Неочекивана грешка на серверу

**## Примери употребе**
Коришћење cURL-а за добијање тренутног стања:

```bash
curl http://192.168.1.100/api/state
```

Коришћење cURL-а за отварање врата:

```bash
curl -X POST http://192.168.1.100/api/door/open
```

Коришћење cURL-а за ажурирање подешавања:

```bash
curl -X POST -H "Content-Type: application/json" -d '{"doorAutoMode":true,"doorOpenHour":7,"doorCloseHour":20}' http://192.168.1.100/api/settings
```

**## Будуће крајње тачке**
Будуће верзије OpenCoopControl-а могу укључивати додатне крајње тачке за функције као што су:

- Приступ историјским подацима
- Вишеструки распореди храњења
- Интеграција камере
- Напредна правила аутоматизације
