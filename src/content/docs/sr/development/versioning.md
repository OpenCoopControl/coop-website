---
title: Политика верзионисања
description: Смернице и праксе верзионисања за пројекат OpenCoopControl.
---

Пројекат OpenCoopControl прати [семантичко верзионисање](https://semver.org/lang/sr/) (SemVer) за сва издања.

## Формат верзије

Верзије се означавају у формату `X.Y.Z`, где:

- `X` је главна верзија (увећава се при некомпатибилним изменама API-ја)
- `Y` је споредна верзија (увећава се при увођењу нових, али компатибилних функционалности)
- `Z` је закрпа (увећава се при компатибилним исправкама грешака)

Додатне ознаке за претиздања и метаподатке могу се додати као наставци:

- Алфа издања: `X.Y.Z-alpha.N`
- Бета издања: `X.Y.Z-beta.N`
- Кандидати за издање: `X.Y.Z-rc.N`

## Увећање верзија

### Главна верзија (X)

Увећава се када:

- Се уводе некомпатибилне измене у хардверу
- Долази до прекида компатибилности у web API-ју
- Се реструктурира формат конфигурационе датотеке
- Се мењају пинови тако да је потребно ново ожичење

### Споредна верзија (Y)

Увећава се када:

- Се додају нове функционалности на компатибилан начин
- Се функционалност депрекује (али се не уклања)
- Се додају нове конфигурационе опције
- Се уводи подршка за нове сензоре или модуле

### Верзија закрпе (Z)

Увећава се када:

- Се исправљају грешке без нарушавања компатибилности
- Се унапређују перформансе
- Се ажурира документација
- Се праве ситне измене које не уводе нове функционалности

## Циклус издања

1. Развој се одвија у гранама за функционалности (feature)
2. Функционалности се спајају у грану `develop`
3. Када је спремно за издање, креира се грана `release/vX.Y.Z`
4. Након тестирања, release грана се спаја у `main`
5. Издање се означава као `vX.Y.Z`

## Датотеке издања

Свако означено издање аутоматски генерише:

- Фирмвер бинарни фајл (`opencoopcontrol_vX.Y.Z_firmware.bin`)
- SPIFFS фајл систем (`opencoopcontrol_vX.Y.Z_spiffs.bin`)
- Скрипте за флешовање за Windows и Linux/Mac

## Компатибилност верзија

Фирмвер проверава компатибилност верзије при иницијализацији са постојећом конфигурацијом. Уколико је дошло до breaking измена у формату конфигурације, систем ће се ресетовати на подразумеване вредности.

## Ажурирање између верзија

### Споредне и закрпне верзије

Корисници могу једноставно флешовати нове бинарне фајлове. Конфигурације ће бити очуване.

### Главне верзије

При ажурирању на нову главну верзију, корисници треба да:

1. Направе резервну копију свих прилагођених подешавања
2. Изврше потпуно флешовање (фирмвер + фајл систем)
3. Поново конфигуришу уређај по потреби

## Напомене о издању

Напомене треба да садрже:

- Резиме промена
- Нове функционалности
- Исправке грешака
- Познате проблеме
- Потребне измене у хардверу/ожичењу (ако их има)
- Посебна упутства за ажурирање (ако су потребна)

## Креирање новог издања

За креирање новог издања користите скрипту `create-release.sh` у директоријуму `scripts`:

```bash
cd scripts
./create-release.sh
```

Скрипта ће Вас водити кроз следеће кораке:

1. Избор новог броја верзије
2. Креирање гране за издање
3. Ажурирање информација о верзији у изворном коду
4. Додавање уноса у changelog
5. Слање гране на преглед

## Одобрење издања

Сва издања мора да прегледа бар један члан тима пре него што се споје у `main`. Преглед обухвата:

1. Преглед кода
2. Тестирање на стварном хардверу
3. Потврду да је документација ажурирана
4. Проверу могућих проблема са компатибилношћу

Ова политика верзионисања омогућава корисницима да са сигурношћу ажурирају свој систем, разумевајући утицај сваког појединачног ажурирања.
